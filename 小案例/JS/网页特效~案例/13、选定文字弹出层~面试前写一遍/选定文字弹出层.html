<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>选定文字弹出层</title>
	<style>
		div {
			width: 400px;
			margin: 50px;
		}
		#demo {
			width: 100px;
			height: 100px;
			background-color: pink;
			position: absolute;
			top: 0;
			left: 0;
			display: none;
		}
	</style>
</head>
<body>
	<div id="test">
		是无法家里就暗示法阿斯蒂芬阿斯蒂芬安抚阿斯蒂芬艾薇儿及我哦键而哦啊上的地方爱死发送发斯蒂芬安抚阿斯蒂芬阿瑟软件覅热偶尔哦阿萨德安抚阿斯蒂芬阿斯蒂芬爱书法家老师的爱发呆 是无法家里就暗示法阿斯蒂芬阿斯蒂芬安抚阿斯蒂芬艾薇儿及我哦键而哦啊上的地方爱死发送发斯蒂芬安抚阿斯蒂芬阿瑟软件覅热偶尔哦阿萨德安抚阿斯蒂芬阿斯蒂芬爱书法家老师的爱发呆 是无法家里就暗示法阿斯蒂芬阿斯蒂芬安抚阿斯蒂芬艾薇儿及我哦键而哦啊上的地方爱死发送发斯蒂芬安抚阿斯蒂芬阿瑟软件覅热偶尔哦阿萨德安抚阿斯蒂芬阿斯蒂芬爱书法家老师的爱发呆 
	</div>
	<div class="another">
		选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 选中不弹出 
	</div>
	<span id="demo"></span>
</body>
</html>
<script>
	function $(id){ return document.getElementById(id); }
	$("test").onmouseup = function(event){
		var event = event || window.event;
		var mousex = event.clientX;  // 鼠标的 x坐标。
		var mousey = event.clientY;	 // 鼠标的 y坐标。
		var txt;   // 用于存贮文字的变量。
		if(window.getSelection){  // 获取我们选中的文字。
			txt = window.getSelection().toString(); // 转为字符串。
		}else{
			txt = document.selection.createRange().text;  // ie 的写法
		}
		if(txt){  	// 所有字符串都为真，而 "" 是假； 所有数字是真，而 0 是假。
			// 看看有没有选中文字，没有选中文字而txt为空，则不执行。故点击一下鼠标时选中内容为空。
			showBox(mousex,mousey,txt); // 调用函数。
		}
	}
	// 点击空白处隐藏：
	document.onmousedown = function(event){
		var event = event || window.event;
		var targetId = event.target ? event.target.id : event.srcElement.id;
		if(targetId != "demo"){  // 获取当前对象。
			$("demo").style.display= "none";
		}
	}


	function showBox(mousex,mousey,contentText){  // 相关操作。
		setTimeout(function(){  // 用定时器 延时显示。
			$("demo").style.display= "block";
			$("demo").style.left= mousex + "px";
			$("demo").style.top= mousey + "px";
			$("demo").innerHTML= contentText;					
		},300);		
	}
</script>