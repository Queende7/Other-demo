<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>下拉菜单（面向对象版本）</title>
<style type="text/css">
*{ padding:0; margin:0; list-style:none;}
.all{ width:330px; height:30px; background:url(img/bg.jpg) no-repeat; margin:100px auto; line-height:30px; text-align:center; padding-left:10px; margin-bottom:0;}
.all ul li{ width:100px; height:30px; background:url(img/libg.jpg); float:left; margin-right:10px; position:relative; cursor:pointer;}
.all ul ul{ position:absolute; left:0; top:30px; display:none;}
</style>
</head>

<body>
<div class="all" id="list">
	<ul>
		<li>一级菜单
			<ul>
				<li>二级菜单</li>
				<li>二级菜单</li>
				<li>二级菜单</li>
			</ul>
		</li>
		<li>一级菜单
			<ul>
				<li>二级菜单</li>
				<li>二级菜单</li>
				<li>二级菜单</li>
			</ul>
		</li>
		<li>一级菜单
			<ul>
				<li>二级菜单</li>
				<li>二级菜单</li>
				<li>二级菜单</li>
			</ul>
		</li>
	</ul>
</div>
</body>
</html>
<script>
	/*获取对象    遍历对象操作  显示模块  隐藏模块*/	
	// 1、构造函数--是一个普通函数，但内部使用了this变量。
	function List(id){
		this.id = document.getElementById(id); // 取id 值。
		this.lis = this.id.children[0].children;// 获取一级菜单所有的li。
	}

	// 2、遍历所有的 li  显示和隐藏
	List.prototype.init = function(){ // 自定义List 的方法为init
		for(var i=0;i<this.lis.length;i++){
			var that = this;    // 此时that 是指 对象List。
			this.lis[i].index = i;
			this.lis[i].onmouseover = function(){
				that.show(this.children[0]); // 显示出来
			}
			this.lis[i].onmouseout = function(){
				that.hide(this.children[0]); // 隐藏起来
			}
		}
	}

	// 3、封装 显示模块
	List.prototype.show = function(obj){ // 可以把那些不变的属性和方法，直接定义在prototype对象上
		obj.style.display = "block";
	}	

	// 封装 显示模块
	List.prototype.hide = function(obj){
		obj.style.display = "none";
	}

	var list = new List("list"); // 实例了一个对象 ，叫 list。对构造函数使用new运算符，就能生成实例，并且this变量会绑定在实例对象上。
	list.init();  // 对象的方法。
</script>
